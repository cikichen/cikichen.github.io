<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Taro on 编程心语</title>
    <link>https://www.ithome.me/tags/taro/</link>
    <description>Recent content in Taro on 编程心语</description>
    <generator>Hugo</generator>
    <language>zh-CN</language>
    <copyright>©{year}, All Rights Reserved. Simon Chen</copyright>
    <lastBuildDate>Wed, 12 May 2021 20:34:08 +0800</lastBuildDate>
    <atom:link href="https://www.ithome.me/tags/taro/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>There is an issue with node-fibers</title>
      <link>https://www.ithome.me/post/2021/05/12/m1%E6%97%A0%E6%B3%95%E7%BC%96%E8%AF%91taro%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</link>
      <pubDate>Wed, 12 May 2021 20:34:08 +0800</pubDate>
      <guid>https://www.ithome.me/post/2021/05/12/m1%E6%97%A0%E6%B3%95%E7%BC%96%E8%AF%91taro%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</guid>
      <description>&lt;h3 id=&#34;macbook-m1和taro&#34;&gt;&lt;code&gt;MacBook M1&lt;/code&gt;和&lt;code&gt;taro&lt;/code&gt;&lt;/h3&gt;&#xA;&lt;p&gt;在MacBook M1上运行&lt;code&gt;taro&lt;/code&gt;项目&lt;code&gt;yarn dev:h5&lt;/code&gt;的时候会报下面的错误：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;## There is an issue with `node-fibers` ##&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;`/node_modules/fibers/bin/darwin-arm64-88/fibers.node` is missing.&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Try running this to fix the issue: .nvm/versions/node/v15.5.0/bin/node /node_modules/fibers/build&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Error: Cannot find module &amp;#39;node_modules/fibers/bin/darwin-arm64-88/fibers&amp;#39;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;找了很久没找到解决方案，知道找个一个类似的问题：https://www.jianshu.com/p/145015d721a5&lt;/p&gt;&#xA;&lt;h3 id=&#34;解决办法&#34;&gt;解决办法&lt;/h3&gt;&#xA;&lt;p&gt;我的环境如下：&#xA;node： v15.14.0&#xA;taro-cli： v3.2.8&lt;/p&gt;&#xA;&lt;p&gt;先看错误提示:&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;## There is an issue with `node-fibers` ##&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;`/node_modules/fibers/bin/darwin-arm64-88/fibers.node` is missing.&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Try running this to fix the issue: .nvm/versions/node/v15.14.0/bin/node /node_modules/fibers/build&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Error: Cannot find module &amp;#39;node_modules/fibers/bin/darwin-arm64-88/fibers&amp;#39;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;执行&lt;code&gt;/Users/xxx/.nvm/versions/node/v15.14.0/bin/node /Users/xxx/xxx/node_modules/fibers/build&lt;/code&gt;时找不到fibers的&lt;code&gt;darwin-arm64-88&lt;/code&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;在项目目录下执行&lt;code&gt;find . -name fibers.node&lt;/code&gt;，看看输出路径有没有&lt;code&gt;darwin-arm64-88&lt;/code&gt;，如果没有，继续下面步骤2&lt;/li&gt;&#xA;&lt;li&gt;在项目目录手动执行&lt;code&gt;/Users/xxx/.nvm/versions/node/v15.14.0/bin/node /Users/xxx/xxx/node_modules/fibers/build&lt;/code&gt;，输出提示&lt;code&gt;node-gyp not found! Please ensure node-gyp is in your PATH--&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;执行&lt;code&gt;npm install -g node-gyp&lt;/code&gt;安装&lt;code&gt;node-gyp&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;再次执行&lt;code&gt;/Users/xxx/.nvm/versions/node/v15.14.0/bin/node /Users/xxx/xxx/node_modules/fibers/build&lt;/code&gt;，此时报错&lt;code&gt;binding.gyp not found&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;项目目录下执行&lt;code&gt;find . -name binding.gyp&lt;/code&gt;，会发现&lt;code&gt;node_modules/fibers/binding.gyp&lt;/code&gt;，项目中是存在这个文件的&lt;/li&gt;&#xA;&lt;li&gt;项目录下下&lt;code&gt;cd node_modules/fibers&lt;/code&gt;，然后再次执行&lt;code&gt;/Users/xxx/.nvm/versions/node/v15.14.0/bin/node /Users/xxx/xxx/node_modules/fibers/build&lt;/code&gt;，不出意外的话此时应该编译通过了。&lt;/li&gt;&#xA;&lt;li&gt;然后&lt;code&gt;cd ../..&lt;/code&gt;，执行&lt;code&gt;yarn dev:h5&lt;/code&gt;，成功启动。&lt;/li&gt;&#xA;&lt;/ol&gt;</description>
    </item>
  </channel>
</rss>
