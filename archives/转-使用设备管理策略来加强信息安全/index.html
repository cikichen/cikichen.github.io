<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>[转]使用设备管理策略来加强信息安全</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#00796b">
  <meta name="msapplication-TileColor" content="#4E8071"/>
  
  
  
  
  <link rel="stylesheet" href="/css/style.css" type="text/css"> 
</head>


<body>

  <div id="container" class="container">
    <div class="left-col">
    <div class="intrude-less">
  <header id="header" class="inner">
    <a href="/" class="profilepic">
      <img src="https://avatars2.githubusercontent.com/u/1478821?v=3&amp;s=140" class="block-select js-avatar" style="width: 100%;height: 100%;opacity: 1;">
	</a>
	<p class="header-subtitle">分享有助于提升</p>
    <nav class="header-menu">
      <ul>
        <li><a href="/">主页</a></li><li><a href="/archives">所有文章</a></li><li><a href="/categories/移动开发">移动开发</a></li><li><a href="/about-me">关于我</a></li>
      </ul>
    </nav>
  </header>				
</div>


    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  <div class="intrude-less">
    <header id="header" class="inner">
      <a href="/" class="profilepic">
        <img src="https://avatars2.githubusercontent.com/u/1478821?v=3&amp;s=140" class="block-select js-avatar" style="width: 100%;height: 100%;opacity: 1;">
	  </a>
	  <p class="header-subtitle">分享有助于提升</p>
	  <nav class="header-menu">
	    <ul>
        <li><a href="/">主页</a></li><li><a href="/archives">所有文章</a></li><li><a href="/categories/移动开发">移动开发</a></li><li><a href="/about-me">关于我</a></li><div class="clearfix"></div>
		</ul>
	  </nav>
	</header>				
  </div>
</nav>

      <div class="body-wrap">
<article id="post-转-使用设备管理策略来加强信息安全" class="article article-type-post" itemscope itemprop="blogPost">

   
    
    <div class="article-meta">
      
<div class="article-date">
<span class="datetime-published-tag"> 2013-07-19 </span>
</div>


    </div>
    
    
  
  <div class="article-inner block-select">
  
    
    
      <header class="article-header">
        
           
  
    <h1 class="article-title" itemprop="name">
      [转]使用设备管理策略来加强信息安全
    </h1>
  

        
      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud block-select">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设备管理策略/">设备管理策略</a></li></ul>
	</div>


        
             <div class="clearfix"></div>
        
      </div>
      
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="&#x8BFE;&#x7A0B;&#x5185;&#x5BB9;"><a href="#&#x8BFE;&#x7A0B;&#x5185;&#x5BB9;" class="headerlink" title="&#x8BFE;&#x7A0B;&#x5185;&#x5BB9;"></a>&#x8BFE;&#x7A0B;&#x5185;&#x5BB9;</h2><ol>
<li>&#x5B9A;&#x4E49;&#x548C;&#x58F0;&#x660E;&#x60A8;&#x7684;&#x7B56;&#x7565;</li>
<li>&#x521B;&#x5EFA; Device Administration Receiver</li>
<li>&#x6FC0;&#x6D3B;&#x8BBE;&#x5907;&#x7BA1;&#x7406;&#x5668;</li>
<li>&#x5B9E;&#x73B0;&#x8BBE;&#x5907;&#x7B56;&#x7565;&#x63A7;&#x5236;&#x5668;</li>
</ol>
<h2 id="&#x60A8;&#x8FD8;&#x5E94;&#x8BE5;&#x9605;&#x8BFB;"><a href="#&#x60A8;&#x8FD8;&#x5E94;&#x8BE5;&#x9605;&#x8BFB;" class="headerlink" title="&#x60A8;&#x8FD8;&#x5E94;&#x8BE5;&#x9605;&#x8BFB;"></a>&#x60A8;&#x8FD8;&#x5E94;&#x8BE5;&#x9605;&#x8BFB;</h2><ul>
<li><a href="http://developer.android.com/guide/topics/admin/device-admin.html" target="_blank" rel="external">Device Administration</a></li>
</ul>
<h2 id="&#x52A8;&#x624B;&#x8BD5;&#x8BD5;"><a href="#&#x52A8;&#x624B;&#x8BD5;&#x8BD5;" class="headerlink" title="&#x52A8;&#x624B;&#x8BD5;&#x8BD5;"></a>&#x52A8;&#x624B;&#x8BD5;&#x8BD5;</h2><p>&#x4E0B;&#x8F7D;&#x793A;&#x4F8B;&#x4EE3;&#x7801;<a href="http://developer.android.com/shareables/training/DeviceManagement.zip" target="_blank" rel="external">DeviceManagement.zip</a></p>
<p>&#x4ECE; Android 2.2 (API level 8)&#x7248;&#x672C;&#x5F00;&#x59CB;&#xFF0C;Android&#x5E73;&#x53F0;&#x901A;&#x8FC7;&#x8BBE;&#x5907;&#x7BA1;&#x7406;API&#x63D0;&#x4F9B;&#x4E86;&#x7CFB;&#x7EDF;&#x7EA7;&#x7684;&#x8BBE;&#x5907;&#x7BA1;&#x7406;&#x80FD;&#x529B;&#x3002;</p>
<p>&#x8FD9;&#x8282;&#x8BFE;&#x7A0B;&#x5C06;&#x4F1A;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5B89;&#x5168;&#x76F8;&#x5173;&#x7684;&#x7A0B;&#x5E8F;&#xFF0C;&#x8BE5;&#x7A0B;&#x5E8F;&#x901A;&#x8FC7;&#x6267;&#x884C;&#x8BBE;&#x5907;&#x7BA1;&#x7406;&#x7B56;&#x7565;&#x6765;&#x4FDD;&#x62A4;&#x8BBE;&#x5907;&#x4FE1;&#x606F;&#x7684;&#x5B89;&#x5168;&#x3002;&#x5177;&#x4F53;&#x6765;&#x8BF4;&#xFF0C;&#x8BE5;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x9501;&#x5C4F;&#x5BC6;&#x7801;&#x7684;&#x5F3A;&#x5EA6;&#xFF0C;&#x901A;&#x8FC7;&#x8BE5;&#x914D;&#x7F6E;&#x6765;&#x4FDD;&#x62A4;&#x654F;&#x611F;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x8FD9;&#x4E2A;&#x548C;&#x5927;&#x5BB6;&#x5728;&#x516C;&#x53F8;&#x4F7F;&#x7528;&#x7684;Windows&#x7535;&#x8111;&#x4E00;&#x6837;&#xFF0C; &#x516C;&#x53F8;&#x4F1A;&#x5B9A;&#x4E49;&#x597D;&#x7535;&#x8111;&#x5BC6;&#x7801;&#x7684;&#x7B56;&#x7565; &#x2014; &#x6BD4;&#x5982;&#x8981;&#x6C42;&#x662F;&#x5927;&#x4E8E;8&#x4F4D;&#x540C;&#x65F6;&#x5305;&#x542B;3&#x79CD;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x5B57;&#x7B26;&#x7684;&#x5BC6;&#x7801; &#x2014; &#x8FD9;&#x6837;&#x6765;&#x4FDD;&#x8BC1;&#x7535;&#x8111;&#x4E0D;&#x4F1A;&#x8F7B;&#x6613;&#x7684;&#x88AB;&#x7834;&#x89E3;&#x6389;&#x5BC6;&#x7801;&#xFF0C;&#x4ECE;&#x800C;&#x4FDD;&#x62A4;&#x7535;&#x8111;&#x91CC;&#x9762;&#x7684;&#x8D44;&#x6599;&#x3002;</p>
<h2 id="&#x5B9A;&#x4E49;&#x548C;&#x58F0;&#x660E;&#x60A8;&#x7684;&#x7B56;&#x7565;"><a href="#&#x5B9A;&#x4E49;&#x548C;&#x58F0;&#x660E;&#x60A8;&#x7684;&#x7B56;&#x7565;" class="headerlink" title="&#x5B9A;&#x4E49;&#x548C;&#x58F0;&#x660E;&#x60A8;&#x7684;&#x7B56;&#x7565;"></a>&#x5B9A;&#x4E49;&#x548C;&#x58F0;&#x660E;&#x60A8;&#x7684;&#x7B56;&#x7565;</h2><p>&#x9996;&#x5148;&#xFF0C;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x652F;&#x6301;&#x7684;&#x7B56;&#x7565;&#x79CD;&#x7C7B;&#x3002;&#x8BBE;&#x5907;&#x7B56;&#x7565;&#x5305;&#x542B;&#x9501;&#x5C4F;&#x5BC6;&#x7801;&#x5F3A;&#x5EA6;&#x3001;&#x5BC6;&#x7801;&#x5931;&#x6548;&#x65F6;&#x95F4; &#x7B49;&#x3002;</p>
<p>&#x60A8;&#x5FC5;&#x987B;&#x5728; res/xml/device_admin.xml &#x6587;&#x4EF6;&#x4E2D;&#x5B9A;&#x4E49;&#x4F7F;&#x7528;&#x7684;&#x7B56;&#x7565;&#x96C6;&#x5408;&#xFF0C;&#x7A0B;&#x5E8F;&#x4F1A;&#x5E94;&#x7528;&#x8BE5;&#x7B56;&#x7565;&#x5230;&#x8BBE;&#x5907;&#x4E0A;&#x3002;&#x540C;&#x65F6;&#x5728;Manifest&#x6587;&#x4EF6;&#x4E2D;&#x9700;&#x8981;&#x5F15;&#x7528;&#x58F0;&#x660E;&#x7684;&#x7B56;&#x7565;&#x96C6;&#x5408;&#x3002;</p>
<p>&#x6BCF;&#x4E2A;&#x58F0;&#x660E;&#x7684;&#x7B56;&#x7565;&#x90FD;&#x5BF9;&#x5E94;<a href="http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html" target="_blank" rel="external">DevicePolicyManager</a>&#x7C7B;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x6216;&#x8005;&#x51E0;&#x4E2A;&#x76F8;&#x5173;&#x7684;&#x51FD;&#x6570;&#x3002;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#x5C1D;&#x8BD5;&#x8C03;&#x7528;&#x4E00;&#x4E2A;&#x6CA1;&#x6709;&#x5728;XML&#x6587;&#x4EF6;&#x4E2D;&#x58F0;&#x660E;&#x8FC7;&#x7684;&#x7B56;&#x7565;&#x51FD;&#x6570;&#xFF0C;&#x4F1A;&#x629B;&#x51FA;&#x4E00;&#x4E2A; <a href="http://developer.android.com/reference/java/lang/SecurityException.html" target="_blank" rel="external">SecurityException</a> &#x5F02;&#x5E38;&#x3002;&#x5982;&#x679C;&#x7A0B;&#x5E8F;&#x60F3;&#x7BA1;&#x7406;&#x5176;&#x4ED6;&#x7C7B;&#x578B;&#x7684;&#x7B56;&#x7565;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x7684;&#x6743;&#x9650; &#x2014; &#x6BD4;&#x5982; <strong>force-lock</strong>&#x3002;&#x5728;&#x540E;&#x9762;&#x60A8;&#x4F1A;&#x770B;&#x5230;&#xFF0C;&#x5728;&#x8BBE;&#x5907;&#x7BA1;&#x7406;&#x5668;&#x7684;&#x6FC0;&#x6D3B;&#x6D41;&#x7A0B;&#x4E2D;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x754C;&#x9762;&#x544A;&#x8BC9;&#x7528;&#x6237;&#x60A8;&#x6240;&#x58F0;&#x660E;&#x7684;&#x7B56;&#x7565;&#x96C6;&#x5408;&#x5217;&#x8868;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x5728;<strong>res/xml/device_admin.xml</strong>&#x6587;&#x4EF6;&#x4E2D;&#x5B9A;&#x4E49;&#x4E86;limit password &#x7B56;&#x7565;&#xFF1A;<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">device-admin</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">uses-policies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">limit-password</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">uses-policies</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">device-admin</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>&#x5728; manifest &#x6587;&#x4EF6;&#x4E2D;&#x5F15;&#x7528;&#x5B9A;&#x4E49;&#x7684;&#x7B56;&#x7565;&#xFF1A;<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:name</span>=<span class="string">&quot;.Policy$PolicyAdmin&quot;</span> <span class="attr">android:permission</span>=<span class="string">&quot;android.permission.BIND_DEVICE_ADMIN&quot;</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">strong</span>&gt;</span><span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.device_admin&quot;</span></span></div><div class="line"><span class="tag">        <span class="attr">android:resource</span>=<span class="string">&quot;@xml/device_admin&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.action.DEVICE_ADMIN_ENABLED&quot;</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="&#x521B;&#x5EFA; Device Administration Receiver"><a href="#&#x521B;&#x5EFA;-Device-Administration-Receiver" class="headerlink" title="&#x521B;&#x5EFA; Device Administration Receiver"></a>&#x521B;&#x5EFA; Device Administration Receiver</h2><p>&#x5F53;&#x60A8;&#x5B9A;&#x4E49;&#x7684;&#x7B56;&#x7565;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x901A;&#x77E5;&#x60A8;&#x521B;&#x5EFA;&#x7684;&#x8FD9;&#x4E2A;&#x8BBE;&#x5907;&#x7BA1;&#x7406;&#x5668;Receiver&#x3002;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x8986;&#x76D6;(Override)&#x9700;&#x8981;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</p>
<p>&#x5728;Device Admin&#x8FD9;&#x4E2A;&#x793A;&#x4F8B;&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x6237;&#x64A4;&#x9500;&#x4E86;&#x8BBE;&#x5907;&#x7BA1;&#x7406;&#x5668;&#xFF0C;&#x793A;&#x4F8B;&#x7A0B;&#x5E8F;&#x6240;&#x914D;&#x7F6E;&#x7684;&#x7B56;&#x7565;&#x4FE1;&#x606F;&#x5C06;&#x4F1A;&#x6E05;&#x9664;&#x3002;&#x60A8;&#x9700;&#x8981;&#x8003;&#x8651;&#x5B9E;&#x73B0;&#x7B26;&#x5408;&#x60A8;&#x7684;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#x7684;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x5220;&#x9664;&#x4E00;&#x4E9B;&#x654F;&#x611F;&#x4FE1;&#x606F;&#x6765;&#x51CF;&#x8F7B;&#x5B89;&#x5168;&#x98CE;&#x9669;&#x3001;&#x8FD8;&#x53EF;&#x4EE5;&#x7981;&#x7528;&#x8FDC;&#x7A0B;&#x540C;&#x6B65;&#x529F;&#x80FD; &#x7B49;&#x3002;</p>
<p>&#x4E0D;&#x8981;&#x5FD8;&#x4E86;&#x5728;manifest&#x6587;&#x4EF6;&#x4E2D;&#x6CE8;&#x518C;&#x60A8;&#x7684;Receiver&#x3002;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">PolicyAdmin</span> <span class="keyword">extends</span> <span class="title">DeviceAdminReceiver</span> </span>{</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDisabled</span><span class="params">(Context context, Intent intent)</span> </span>{</div><div class="line">        <span class="comment">// Called when the app is about to be deactivated as a device administrator.</span></div><div class="line">        <span class="comment">// Deletes previously stored password policy.</span></div><div class="line">        <span class="keyword">super</span>.onDisabled(context, intent);</div><div class="line">        SharedPreferences prefs = context.getSharedPreferences(APP_PREF, Activity.MODE_PRIVATE);</div><div class="line">        prefs.edit().clear().commit();</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure></p>
<h2 id="&#x6FC0;&#x6D3B;&#x8BBE;&#x5907;&#x7BA1;&#x7406;&#x5668;"><a href="#&#x6FC0;&#x6D3B;&#x8BBE;&#x5907;&#x7BA1;&#x7406;&#x5668;" class="headerlink" title="&#x6FC0;&#x6D3B;&#x8BBE;&#x5907;&#x7BA1;&#x7406;&#x5668;"></a>&#x6FC0;&#x6D3B;&#x8BBE;&#x5907;&#x7BA1;&#x7406;&#x5668;</h2><p>&#x5728;&#x6267;&#x884C;&#x4EFB;&#x4F55;&#x7B56;&#x7565;&#x4E4B;&#x524D;&#xFF0C;&#x7528;&#x6237;&#x9700;&#x8981;&#x624B;&#x5DE5;&#x7684;&#x6FC0;&#x6D3B;&#x8BBE;&#x5907;&#x7BA1;&#x7406;&#x5668;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x6F14;&#x793A;&#x4E86;&#x5982;&#x4F55;&#x89E6;&#x53D1;&#x8BBE;&#x7F6E;&#x754C;&#x9762;&#x6765;&#x8BA9;&#x7528;&#x6237;&#x6FC0;&#x6D3B;&#x60A8;&#x7684;&#x8BBE;&#x5907;&#x7BA1;&#x7406;&#x5668;&#x7A0B;&#x5E8F;&#x3002;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x4ECB;&#x7ECD;&#x6587;&#x672C;&#x5185;&#x5BB9;&#x544A;&#x8BC9;&#x7528;&#x6237;&#x4E3A;&#x5565;&#x60A8;&#x7684;&#x7A0B;&#x5E8F;&#x9700;&#x8981;&#x6FC0;&#x6D3B;&#x4E3A;&#x8BBE;&#x5907;&#x7BA1;&#x7406;&#x5668;&#x662F;&#x4E2A;&#x4E0D;&#x9519;&#x7684;&#x9009;&#x62E9;&#xFF0C; &#x901A;&#x8FC7;&#x5728;Intent&#x4E2D;&#x8BBE;&#x7F6E; <a href="http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#EXTRA_ADD_EXPLANATION" target="_blank" rel="external">EXTRA_ADD_EXPLANATION</a> &#x5B57;&#x6BB5;&#x3002;</p>
<div>

<p><a href="http://www.ithome.me/wp-content/uploads/2013/07/device-mgmt-activate-device-admin1.png"><img src="http://www.ithome.me/wp-content/uploads/2013/07/device-mgmt-activate-device-admin1-179x300.png" alt="device-mgmt-activate-device-admin"></a></p>
<p><strong>Figure 1.</strong> &#x5728;&#x7528;&#x6237;&#x6FC0;&#x6D3B;&#x754C;&#x9762;&#x63D0;&#x4F9B;&#x5173;&#x4E8E;&#x60A8;&#x7684;&#x8BBE;&#x5907;&#x7B56;&#x7565;&#x7684;&#x63CF;&#x8FF0;&#x4FE1;&#x606F;&#x3002;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (!mPolicy.isAdminActive()) {</div><div class="line"></div><div class="line">    Intent activateDeviceAdminIntent =</div><div class="line">        <span class="keyword">new</span> Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);</div><div class="line"></div><div class="line">    activateDeviceAdminIntent.putExtra(</div><div class="line">        DevicePolicyManager.EXTRA_DEVICE_ADMIN,</div><div class="line">        mPolicy.getPolicyAdmin());</div><div class="line"></div><div class="line">    <span class="comment">// It is good practice to include the optional explanation text to</span></div><div class="line">    <span class="comment">// explain to user why the application is requesting to be a device</span></div><div class="line">    <span class="comment">// administrator. The system will display this message on the activation</span></div><div class="line">    <span class="comment">// screen.</span></div><div class="line">    activateDeviceAdminIntent.putExtra(</div><div class="line">        DevicePolicyManager.EXTRA_ADD_EXPLANATION,</div><div class="line">        getResources().getString(R.string.device_admin_activation_message));</div><div class="line"></div><div class="line">    startActivityForResult(activateDeviceAdminIntent,</div><div class="line">        REQ_ACTIVATE_DEVICE_ADMIN);</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>&#x5982;&#x679C;&#x7528;&#x6237;&#x9009;&#x62E9; &#x201C;Activate &#x6FC0;&#x6D3B;&#x201D; &#x60A8;&#x7684;&#x7A0B;&#x5E8F;&#x4E3A;&#x8BBE;&#x5907;&#x7BA1;&#x7406;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x914D;&#x7F6E;&#x548C;&#x5E94;&#x7528;&#x60A8;&#x7684;&#x7B56;&#x7565;&#x4E86;&#x3002;</p>
<p>&#x53E6;&#x5916;&#x60A8;&#x7684;&#x7A0B;&#x5E8F;&#x8FD8;&#x8981;&#x5904;&#x7406;&#x5176;&#x4ED6;&#x60C5;&#x51B5;&#xFF0C;&#x6BD4;&#x5982;&#x7528;&#x6237;&#x70B9;&#x51FB;&#x4E86;&#x53D6;&#x6D88;(Cancel)&#x6309;&#x94AE;&#x3001;&#x6216;&#x8005;&#x6309;&#x4E86;&#x8FD4;&#x56DE;&#x952E;&#x3001;&#x6216;&#x8005;&#x7528;&#x6237;&#x6309;&#x4E86;Home&#x952E;&#x3002;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x5728;&#x8BBE;&#x7F6E;&#x7B56;&#x7565;Activity&#x7684;<br><a href="http://developer.android.com/reference/android/app/Activity.html#onResume(" target="_blank" rel="external">onResume()</a>) &#x51FD;&#x6570;&#x4E2D;&#x5904;&#x7406;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x3002;&#x5982;&#x679C;&#x9700;&#x8981;&#x7684;&#x8BDD;&#x518D;&#x6B21;&#x628A;&#x6FC0;&#x6D3B;&#x8BBE;&#x5907;&#x7BA1;&#x7406;&#x5458;&#x7684;&#x754C;&#x9762;&#x663E;&#x793A;&#x7ED9;&#x7528;&#x6237;&#x3002;</p>
<h2 id="&#x5B9E;&#x73B0;&#x8BBE;&#x5907;&#x7B56;&#x7565;&#x63A7;&#x5236;&#x5668;"><a href="#&#x5B9E;&#x73B0;&#x8BBE;&#x5907;&#x7B56;&#x7565;&#x63A7;&#x5236;&#x5668;" class="headerlink" title="&#x5B9E;&#x73B0;&#x8BBE;&#x5907;&#x7B56;&#x7565;&#x63A7;&#x5236;&#x5668;"></a>&#x5B9E;&#x73B0;&#x8BBE;&#x5907;&#x7B56;&#x7565;&#x63A7;&#x5236;&#x5668;</h2><p>&#x4E00;&#x65E6;&#x6210;&#x529F;&#x4E86;&#x6FC0;&#x6D3B;&#x4E3A;&#x8BBE;&#x5907;&#x7BA1;&#x7406;&#x5668;&#x540E;&#xFF0C;&#x7A0B;&#x5E8F;&#x5C31;&#x53EF;&#x4EE5;&#x5E94;&#x7528;&#x5B9A;&#x4E49;&#x7684;&#x7B56;&#x7565;&#x4E86;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x968F;&#x7740;Android&#x7684;&#x53D1;&#x5C55;&#xFF0C;&#x5728;&#x65B0;&#x7684;&#x7248;&#x672C;&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x6DFB;&#x52A0;&#x65B0;&#x7684;&#x7B56;&#x7565;&#x3002;&#x6240;&#x4EE5;&#x5728;&#x5E94;&#x7528;&#x7B56;&#x7565;&#x4E4B;&#x524D;&#x5224;&#x65AD;&#x4E0B;&#x5F53;&#x524D;&#x8BBE;&#x5907;&#x7684;&#x7248;&#x672C;&#x662F;&#x5426;&#x652F;&#x6301;&#x8BE5;&#x7B56;&#x7565;&#x662F;&#x6BD4;&#x8F83;&#x4FDD;&#x9669;&#x7684;&#x505A;&#x6CD5;&#x3002;&#x4F8B;&#x5982;&#xFF0C; Password Minimum<br>Upper Case policy(&#x5BC6;&#x7801;&#x6700;&#x5C11;&#x5305;&#x542B;&#x51E0;&#x4E2A;&#x5927;&#x5199;&#x5B57;&#x7B26;&#x7684;&#x7B56;&#x7565;)&#x662F;&#x5728; API level 11 (Honeycomb) &#x7248;&#x672C;&#x5F15;&#x5165;&#x7684;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x5C55;&#x793A;&#x4E86;&#x5982;&#x4F55;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x68C0;&#x6D4B;&#x7248;&#x672C;&#x4FE1;&#x606F;&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">DevicePolicyManager mDPM = (DevicePolicyManager)</div><div class="line">        context.getSystemService(Context.DEVICE_POLICY_SERVICE);</div><div class="line">ComponentName mPolicyAdmin = <span class="keyword">new</span> ComponentName(context, PolicyAdmin.class);</div><div class="line">...</div><div class="line">mDPM.setPasswordQuality(mPolicyAdmin, PASSWORD_QUALITY_VALUES[mPasswordQuality]);</div><div class="line">mDPM.setPasswordMinimumLength(mPolicyAdmin, mPasswordLength);</div><div class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &amp;gt;= Build.VERSION_CODES.HONEYCOMB) {</div><div class="line">    mDPM.setPasswordMinimumUpperCase(mPolicyAdmin, mPasswordMinUpperCase);</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>&#x73B0;&#x5728;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x7B56;&#x7565;&#x4E86;&#x3002;&#x4F46;&#x662F;&#x76EE;&#x524D;&#x7A0B;&#x5E8F;&#x8FD8;&#x6CA1;&#x6709;&#x8BBF;&#x95EE;&#x5F53;&#x524D;&#x4F7F;&#x7528;&#x7684;&#x9501;&#x5C4F;&#x5BC6;&#x7801;&#xFF0C;&#x4E0D;&#x77E5;&#x9053;&#x7528;&#x6237;&#x5F53;&#x524D;&#x7684;&#x8BBE;&#x7F6E;&#x662F;&#x5426;&#x7B26;&#x5408;&#x60A8;&#x5B9A;&#x4E49;&#x7684;&#x7B56;&#x7565;&#x8981;&#x6C42;&#x3002;&#x901A;&#x8FC7;Device Policy Manager API&#x53EF;&#x4EE5;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x7528;&#x6237;&#x8BBE;&#x7F6E;&#x7684;&#x5BC6;&#x7801;&#x662F;&#x5426;&#x7B26;&#x5408;&#x60A8;&#x5B9A;&#x4E49;&#x7684;&#x7B56;&#x7565;&#x3002;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x5F53;&#x524D;&#x7684;&#x5BC6;&#x7801;&#x4E0D;&#x7B26;&#x5408;&#x5B89;&#x5168;&#x7B56;&#x7565;&#xFF0C;&#x8BBE;&#x5907;&#x7BA1;&#x7406;API&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x7684;&#x53BB;&#x5904;&#x7406;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x3002;&#x60A8;&#x7684;&#x7A0B;&#x5E8F;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x542F;&#x52A8;&#x8BBE;&#x7F6E;&#x7A0B;&#x5EA6;&#x4E2D;&#x7684;&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#x754C;&#x9762;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="comment">!mDPM.isActivePasswordSufficient()) {</span></div><div class="line">    ...</div><div class="line">    // Triggers password change screen <span class="keyword">in</span> Settings.</div><div class="line">    <span class="keyword">Intent</span> <span class="keyword">intent</span> =</div><div class="line">        new <span class="keyword">Intent</span>(DevicePolicyManager.ACTION_SET_NEW_PASSWORD);</div><div class="line">    startActivity(<span class="keyword">intent</span>);</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x81EA;&#x7531;&#x7684;&#x9009;&#x62E9;&#x4EFB;&#x4F55;&#x4E00;&#x79CD;&#x9501;&#x5C4F;&#x673A;&#x5236;&#xFF0C;&#x4F8B;&#x5982; None(&#x65E0;)&#x3001; Pattern(&#x56FE;&#x6848;)&#x3001;PIN (numeric)&#x3001;&#x6216;&#x8005; Password&#x5BC6;&#x7801; (alphanumeric)&#x3002; &#x5F53;&#x9009;&#x62E9;&#x4E86;&#x4E00;&#x79CD;&#x5BC6;&#x7801;&#x7B56;&#x7565;&#xFF0C;&#x4E0A;&#x9762;&#x7684;&#x5305;&#x542B;&#x5F3A;&#x5EA6;&#x6BD4;&#x8F83;&#x5F31;&#x7684;&#x9501;&#x5C4F;&#x673A;&#x5236;&#x5C31;&#x4F1A;&#x88AB;&#x7981;&#x7528;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x914D;&#x7F6E;&#x4E86;&#x201C;Numeric&#x201D;&#x7C7B;&#x578B;&#x7684;&#x5BC6;&#x7801;&#x5F3A;&#x5EA6;&#xFF0C;&#x7528;&#x6237;&#x53EA;&#x80FD;&#x4F7F;&#x7528; PIN (numeric) &#x548C; Password (alphanumeric) &#x8FD9;&#x4E24;&#x79CD;&#x9501;&#x5C4F;&#x673A;&#x5236;&#x3002;</p>
<p>&#x5F53;&#x8BBE;&#x7F6E;&#x7684;&#x5BC6;&#x7801;&#x901A;&#x8FC7;&#x4E86;&#x914D;&#x7F6E;&#x7684;&#x7B56;&#x7565;&#xFF0C;&#x7A0B;&#x5E8F;&#x5C31;&#x5141;&#x8BB8;&#x8BBF;&#x95EE;&#x654F;&#x611F;&#x7684;&#x5185;&#x5BB9;&#x4E86;&#x3002;<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (!mDPM.isAdminActive(..)) {</div><div class="line">    <span class="comment">// Activates device administrator.</span></div><div class="line">    <span class="params">...</span></div><div class="line">} <span class="keyword">else</span> <span class="keyword">if</span> (!mDPM.isActivePasswordSufficient()) {</div><div class="line">    <span class="comment">// Launches password set-up screen in Settings.</span></div><div class="line">    <span class="params">...</span></div><div class="line">} <span class="keyword">else</span> {</div><div class="line">    <span class="comment">// Grants access to secure content.</span></div><div class="line">    <span class="params">...</span></div><div class="line">    startActivity(<span class="literal">new</span> Intent(context, SecureActivity.class));</div><div class="line">}</div></pre></td></tr></table></figure></p>
<blockquote>
<p>&#x539F;&#x6587;:<a href="http://blog.chengyunfeng.com/?p=325" target="_blank" rel="external">http://blog.chengyunfeng.com/?p=325</a></p>
</blockquote>
</div>
      
      
      
        <div class="post-copyright">
<p><a href="http://www.ithome.me/archives/转-使用设备管理策略来加强信息安全/">本文</a>为原创，转载请遵守本站的版本</p>
<p class="updated-time" >更新于: </span>2015年8月4日 11:08</p>
</div>

      
    </div>
    
  </div>
  
    
<nav id="article-nav" class="block-select">
  
    <a href="/archives/转-Android中黄色警告提示强迫症/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">&lt;</strong>
      <div class="article-nav-title">
        
          [转]Android中黄色警告提示强迫症
        
      </div>
    </a>
  
  
    <a href="/archives/转-Android开发者必知的开发资源/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">[转]Android开发者必知的开发资源 </div>
      <strong class="article-nav-caption">&gt;</strong>
    </a>
  
</nav>


  
</article>





</div>
      <footer id="footer" class="block-select">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">&copy; 2015-2018
        Simon.Chen
      </div>
    </div>
  </div>
</footer>

    </div>
    <script>
	var ThemeXConfig = {fancybox: false,mathjax: false,animate: false,isHome: false,isPost: true,isArchive: false,isTag: false,isCategory: false,open_in_new: true, CDN_PATH: '' }
</script>


    <script src="/js/jquery-1.9.1.min.js"></script>
    <script src="/js/base.js"></script>
    <script src="/js/jquery.lazyload.min.js"></script>





  </div>
</body>
</html>
