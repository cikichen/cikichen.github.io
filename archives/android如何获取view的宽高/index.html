<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>android如何获取view的宽高 | IT驿站</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#4f6b79">
  <meta name="msapplication-TileColor" content="#4f6b79"/>
  
  
  <meta name="description" content="As the idea of the Android evolved, Android has received wide attention and deployed on a very wide range of devices. Android UI had to move and make developers&amp;#x2019; life easier: AbsoluteLayout got">
<meta name="keywords" content="android">
<meta property="og:type" content="article">
<meta property="og:title" content="android如何获取view的宽高">
<meta property="og:url" content="http://chensiming.me/archives/android如何获取view的宽高/index.html">
<meta property="og:site_name" content="IT驿站">
<meta property="og:description" content="As the idea of the Android evolved, Android has received wide attention and deployed on a very wide range of devices. Android UI had to move and make developers&amp;#x2019; life easier: AbsoluteLayout got">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2015-07-28T08:33:49.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="android如何获取view的宽高">
<meta name="twitter:description" content="As the idea of the Android evolved, Android has received wide attention and deployed on a very wide range of devices. Android UI had to move and make developers&amp;#x2019; life easier: AbsoluteLayout got">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link rel="stylesheet" href="/css/style.css" type="text/css"> 
  

</head>

<body>
  <div id="container" class="container">
    <div class="left-col">
    <div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://avatars2.githubusercontent.com/u/1478821?v=3&amp;s=140" class="js-avatar">
			
		</a>
		
		<p class="header-subtitle">分享有助于提升</p>
		
        <nav class="header-menu">
            <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives">所有文章</a></li>
                
                    <li><a href="/categories/移动开发">移动开发</a></li>
                
                    <li><a href="/about-me">关于我</a></li>
                
            </ul>
        </nav>
	</header>				
</div>


    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
	<div class="intrude-less">
		<header id="header" class="inner">
			<a href="/" class="profilepic">
                
			        <img lazy-src="https://avatars2.githubusercontent.com/u/1478821?v=3&amp;s=140" class="js-avatar">
			    
			</a>
			<!-- <hgroup>
			  <h1 class="header-author">Simon.Chen</h1>
			</hgroup>-->
			
			<p class="header-subtitle">分享有助于提升</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/categories/移动开发">移动开发</a></li>
		        
					<li><a href="/about-me">关于我</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-android如何获取view的宽高" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/archives/android如何获取view的宽高/" class="article-date">
<span class="datetime-published-tag"> 2015-05-15 </span>
</a>

    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      android如何获取view的宽高
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        <!-- 
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Android/">Android</a><a class="article-category-link" href="/categories/Android/JAVA/">JAVA</a><a class="article-category-link" href="/categories/Android/JAVA/分享/">分享</a><a class="article-category-link" href="/categories/Android/JAVA/分享/转载/">转载</a>
	</div>

 -->
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>
	</div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>As the idea of the Android evolved, Android has received wide attention and deployed on a very wide range of devices. Android UI had to move and make developers&#x2019; life easier: AbsoluteLayout got deprecated. It is very logical because your app will be installed on very small devices and very large devices and all the devices in between.</p>
<p>Now, it is all WRAP_CONTENT, FILL_PARENT/MATCH_PARENT. Yet, a developer sometimes needs to know the dimensions of his view to do some extra tweaks to perfect his ui.</p>
<p>So, what is the best way to do so?<br><a name="more"></a>Well, there are several ways of getting the dimensions of a view. Most of them boil down to waiting the layout of the view hierarchy. In case you still have not gotten into the problem of getWidth() and getHeight() returning 0, well that is very normal in Android as the width and height of a view are zero until they are visible, measured, and part of the layout.</p>
<p>In the following I will assume that your View is called <em><strong>view</strong></em>.<br><strong>
</strong></p>
<p>&#xA0;</p>
<p><a href="http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html" target="_blank" rel="external">Global Layout Listener</a></p>
<p>&#xA0;</p>
<p><div class="top-box hide"></div></p>
<p><pre data-original-code="view.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {  @SuppressLint(&quot;NewApi&quot;)  @SuppressWarnings(&quot;deprecation&quot;)  @Override   public void onGlobalLayout() {    //now we can retrieve the width and height    int width = view.getWidth();    int height = view.getHeight();    //...    //do whatever you want with them    //...    //this is an important step not to keep receiving callbacks:    //we should remove this listener" data-snippet-id="ext.563d77f7955347b4ec631f957c735369" data-snippet-saved="false" data-csrftoken="syKbAqG3-LMaCEc8EvOMsq2TwAVwDB7dp8Lw" data-codota-status="done">view.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {<br> @SuppressLint(&#x201C;NewApi&#x201D;)<br> @SuppressWarnings(&#x201C;deprecation&#x201D;)<br> @Override<br>  public void onGlobalLayout() {<br>   //now we can retrieve the width and height<br>   int width = view.getWidth();<br>   int height = view.getHeight();<br>   //&#x2026;<br>   //do whatever you want with them<br>   //&#x2026;<br>   //this is an important step not to keep receiving callbacks:<br>   //we should remove this listener</pre></p>
<p><div class="top-box hide"></div></p>
<p><pre>   //I use the function to remove it based on the api level!</pre></p>
<p><pre data-original-code="   //I use the function to remove it based on the api level! if(android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.JELLY_BEAN)     view.getViewTreeObserver().removeOnGlobalLayoutListener(this);    else     view.getViewTreeObserver().removeGlobalOnLayoutListener(this);   }  }); " data-snippet-id="ext.04c4789d679c8d65ddefe65172e403b8" data-snippet-saved="false" data-csrftoken="PKx5Smbi-r1Ntw2kShc89IBhsLbTN3cs5vug" data-codota-status="done">if(android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.JELLY_BEAN) view.getViewTreeObserver().removeOnGlobalLayoutListener(this); else view.getViewTreeObserver().removeGlobalOnLayoutListener(this); } });</pre><br>&#xA0;</p>
<p>&#xA0;</p>
<p><a href="http://stackoverflow.com/questions/13681024/how-to-manage-gridview/13835812#13835812" target="_blank" rel="external">How to manage GridView</a></p>
<p>&#xA0;</p>
<p><div class="top-box hide"></div></p>
<p><pre data-original-code="mGrid = new GridView(this) {     @Override     protected void onLayout(boolean changed, int l, int t, int r, int b) {         super.onLayout(changed, l, t, r, b);         //here you have the size of the view and you can do stuff     } };" data-snippet-id="ext.122cecf122f76312b72b23933bae4bad" data-snippet-saved="false" data-csrftoken="yJArqrTU-F98pnYyXeO49Cwife1l63B361Hs" data-codota-status="done">mGrid = new GridView(this) {<br>    @Override<br>    protected void onLayout(boolean changed, int l, int t, int r, int b) {<br>        super.onLayout(changed, l, t, r, b);<br>        //here you have the size of the view and you can do stuff<br>    }<br>};</pre><br>&#xA0;</p>
<p>&#xA0;</p>
<p>&#xA0;</p>
<p><div class="top-box hide"></div></p>
<p><pre data-original-code="view.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED); int widht = view.getMeasuredWidth(); int height = view.getMeasuredHeight();" data-snippet-id="ext.09a9c8f8a6d446eecc8a68244ad4cfca" data-snippet-saved="false" data-csrftoken="VBPhrL70-wBU3b36nJvbUgC9EGcwjTpBfiec" data-codota-status="done">view.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED);<br>int widht = view.getMeasuredWidth();<br>int height = view.getMeasuredHeight();</pre><br>&#x539F;&#x6587;:<a href="http://www.sherif.mobi/2013/01/how-to-get-widthheight-of-view.html" target="_blank" rel="external">http://www.sherif.mobi/2013/01/how-to-get-widthheight-of-view.html</a></p>

      
      
        <div class="post-copyright">
<p><a href="http://chensiming.me/archives/android如何获取view的宽高/">本文</a>为原创，转载请遵守本站的版本</p>
<p class="updated-time" >更新于: </span>2015年7月28日 16:07</p>
</div>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/archives/Eclipse和Android-Studio的常用快捷键对比/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">&lt;</strong>
      <div class="article-nav-title">
        
          Eclipse和Android Studio的常用快捷键对比
        
      </div>
    </a>
  
  
    <a href="/archives/how-to-fix-android-sdk-content-loader-stuck-at-0-in-eclipse/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">How to fix Android SDK Content Loader stuck at 0% in Eclipse</div>
      <strong class="article-nav-caption">&gt;</strong>
    </a>
  
</nav>


  
</article>





</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017
            
                 Simon.Chen
            
    	</div>
    </div>
  </div>
</footer>

    </div>
    <script>
	var ThemeXConfig = {
		fancybox: false,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true,
     CDN_PATH: '' 
	}
</script>




    <script src="/js/jquery-1.9.1.min.js"></script>
    <script src="/js/common.js"></script>
    <script src="/js/jquery.lazyload.min.js"></script>







  </div>
</body>
</html>
